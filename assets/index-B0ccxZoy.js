(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(e){if(e.ep)return;e.ep=!0;const a=n(e);fetch(e.href,a)}})();function u(t,A){const n=t/A*255&255;return[n,n,n]}function f(t,A){const n=[0,0,0];if(t!=A){const o=3*Math.log(t)/Math.log(A-1);return o<1?(n[0]=255*o,n):(n[0]=255,n[1]=255,o<2?n[1]*=o-1:n[2]=255*(o-2),n)}return n}const l=[{name:"Colored",fnc:f},{name:"Default",fnc:u}];function g(t){return l.filter(A=>A.name==t)[0].fnc}const d=async(t={},A)=>{let n;if(A.startsWith("data:")){const o=A.replace(/^data:.*?base64,/,"");let e;if(typeof Buffer=="function"&&typeof Buffer.from=="function")e=Buffer.from(o,"base64");else if(typeof atob=="function"){const a=atob(o);e=new Uint8Array(a.length);for(let r=0;r<a.length;r++)e[r]=a.charCodeAt(r)}else throw new Error("Failed to decode base64-encoded data URL, Buffer and atob are not supported");n=await WebAssembly.instantiate(e,t)}else{const o=await fetch(A),e=o.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&e.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(o,t);else{const a=await o.arrayBuffer();n=await WebAssembly.instantiate(a,t)}}return n.instance},m=t=>d(t,"data:application/wasm;base64,AGFzbQEAAAABIQZgAAF/YAAAYAF/AGAEf39/fwBgAX8Bf2AFf39/f38BfwMIBwEFAwACBAAEBQFwAQICBQYBAYACgAIGCQF/AUGQiMACCweOAQkGbWVtb3J5AgAMZ2V0SXRlcmF0aW9uAAENZ2V0SXRlcmF0aW9ucwACC19pbml0aWFsaXplAAAZX19pbmRpcmVjdF9mdW5jdGlvbl90YWJsZQEAEF9fZXJybm9fbG9jYXRpb24ABglzdGFja1NhdmUAAwxzdGFja1Jlc3RvcmUABApzdGFja0FsbG9jAAUJBwEAQQELAQAKygMHAwABC6ABAQZ8IAJBAXS3IAC3IgVEAAAAAAAA+L+ioCAFoyEIQQAhAiAEQQAgBEEAShsiAEEBaiEEIANBAXS3IAG3IgWhIAWjIQlEAAAAAAAAAAAhBQNAIAAgAkYEQCAEDwsgAkEBaiECIAYgBqIhCiAJIAYgBSAFoKKgIgchBiAIIAUgBaIgCqGgIgUgBaIgByAHoqBEAAAAAAAAEEBkRQ0ACyACC/4BAgl8BX8CQCACQQFIDQAgAUEBSA0AIAG3IghEAAAAAAAA+D+iIQkgA0EAIANBAEobIhBBAWohESACtyEGA0AgDUEBdLcgBqEgBqMhCkEAIQ8DQCAPQQF0tyAJoSAIoyELRAAAAAAAAAAAIQVEAAAAAAAAAAAhBEEAIQMDQAJAIAMgEEYEQCARIQMMAQsgA0EBaiEDIAUgBaIhDCAKIAUgBCAEoKKgIgchBSALIAQgBKIgDKGgIgQgBKIgByAHoqBEAAAAAAAAEEBkRQ0BCwsgACAOQQJ0aiADNgIAIA5BAWohDiAPQQFqIg8gAUcNAAsgDUEBaiINIAJHDQALCwsEACMACwYAIAAkAAsQACMAIABrQXBxIgAkACAACwUAQYAICw==");async function I(t,A,n){var o=await m({module:{},env:{memory:new WebAssembly.Memory({initial:100,limit:1e3}),table:new WebAssembly.Table({initial:0,element:"anyfunc"})}});const{getIterations:e,memory:a}=o.exports,r=new Uint32Array(a.buffer,0,t*A);return e(r.byteOffset,t,A,n),Array.from(r)}async function B(t,A,n){var o=I(t,A,n);return o instanceof Promise&&(o=await o),o}async function E({element:t,width:A,height:n,iterations:o,colorMap:e,maxIterations:a}){const r=t.getContext("2d"),c=r.createImageData(A,n);y(c.data,o,a,e),r.putImageData(c,0,0)}function y(t,A,n,o){for(let e=0,a=A.length;e<a;e++){const r=o(A[e],n);t[e*4+0]=r[0],t[e*4+1]=r[1],t[e*4+2]=r[2],t[e*4+3]=255}}const i=document.querySelector("#colormap");for(const t of l){const A=new Option;A.value=t.name,A.textContent=t.name,i.add(A)}i.options[0].selected=!0;var s=document.querySelector("canvas");document.querySelector("button#submit").addEventListener("click",async()=>{const t=document.querySelector("input#width").value,A=document.querySelector("input#height").value,n=document.querySelector("input#maxIter").value,o=g(i.value);s.width=t,s.height=A,console.debug("run");const e=performance.now(),a=await B(t,A,n),r=performance.now();console.debug("Calculation took "+Math.round(r-e)+"ms"),E({element:s,width:t,height:A,colorMap:o,iterations:a,maxIterations:n})});
