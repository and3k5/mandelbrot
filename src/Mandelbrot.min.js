function Mandelbrot(){}Mandelbrot.COLORMAP={},Mandelbrot.COLORMAP.COLORED=function(a){var b=[0,0,0];if(a!=this.maxIteration){var c=3*Math.log(a)/Math.log(this.maxIteration-1);return 1>c?(b[0]=255*c,b):(b[0]=255,b[1]=255,2>c?b[1]*=c-1:b[2]=255*(c-2),b)}return b},Mandelbrot.COLORMAP.DEFAULT=function(a){var b=255-a/this.maxIteration*255&255;return[b,b,b]},Mandelbrot.prototype.colorMap=Mandelbrot.COLORMAP.DEFAULT,Mandelbrot.prototype.maxIteration=1024,Mandelbrot.prototype.width=100,Mandelbrot.prototype.height=100,Mandelbrot.prototype.getIterations=function(){for(var a,b=this.width,c=this.height,d=this.maxIteration,e=0,f=0,g=0,h=0,i=new Uint8Array(b*c),j=0;b>j;j++)for(a=0;c>a;a++){for(e=0;e++<d;){var k=f*f-g*g+((j<<1)-1.5*b)/b;if(g=2*f*g+((a<<1)-c)/c,f=k,f*f+g*g>4)break}i[h++]=e}return i},Mandelbrot.COLORED_COLORMAP=function(a){var b=[0,0,0,255];if(a!=this.maxIteration){var c=3*Math.log(a)/Math.log(this.maxIteration-1);return 1>c?(b[0]=255*c&255,b):(b[0]=255,b[1]=255,2>c?b[1]=255*(c-1)&255:b[2]=255*(c-2)&255,b)}return b},Mandelbrot.DEFAULT_COLORMAP=function(a){var b=255-a/this.maxIteration*255&255;return[b,b,b,255]},Mandelbrot.prototype.colorMap=Mandelbrot.DEFAULT_COLORMAP,Mandelbrot.prototype.render=function(a){for(var b=a.getContext("2d"),c=b.createImageData(this.width,this.height),d=this.getIterations(),e=0,f=d.length;f>e;e++){var g=this.colorMap(d[e]);c.data[4*e+0]=g[0],c.data[4*e+1]=g[1],c.data[4*e+2]=g[2],c.data[4*e+3]=255}b.putImageData(c,0,0)};